---
import Footer from "../components/smart/Footer.astro";
import Nav from "../components/smart/Nav.astro";

interface Props {
    title?: string;
    forceTitle?: boolean;
    description?: string;
    image?: string;
    marginForNav?: boolean;
    allowRobots?: boolean;
}

const defaultTitle = "NUVA â€” Technology agency";

const {
    title = defaultTitle,
    forceTitle = false,
    description = "NUVA is a technology studio in Sandefjord, Norway. We build custom software, hardware, and integrations for businesses with specific industry needs.",
    image = "/image.jpg",
    marginForNav = true,
    allowRobots = true,
} = Astro.props;
---

<!doctype html>
<html lang="en" style="background-color: #0a1410;">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
            rel="stylesheet"
        />
        <title>
            {forceTitle && title}
            {!forceTitle && (title === defaultTitle ? title : `${title} | ${defaultTitle}`)}
        </title>

        {!allowRobots && <meta name="robots" content="noindex, nofollow" />}

        <meta name="description" content={description} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={image} />
        <meta property="og:type" content="website" />

        <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <meta name="apple-mobile-web-app-title" content="nuva.no" />
        <link rel="manifest" href="/site.webmanifest" />
        <style>
            *,
            *::before,
            *::after {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                min-width: 0;
            }

            @font-face {
                font-family: "Butler";
                src:
                    url("/fonts/butler_bold-webfont.woff2") format("woff2"),
                    url("/fonts/butler_bold-webfont.woff") format("woff");
                font-weight: 700;
                font-style: normal;
                font-display: swap;
            }

            @font-face {
                font-family: "Butler";
                src:
                    url("/fonts/butler_light-webfont.woff2") format("woff2"),
                    url("/fonts/butler_light-webfont.woff") format("woff");
                font-weight: 300;
                font-style: normal;
                font-display: swap;
            }
        </style>
    </head>
    <body class="bg-background text-foreground antialiased">
        <Nav />
        {marginForNav && <div class="pt-14 lg:pt-16" />}
        <slot />
        <Footer />
    </body>
</html>

<script>
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const delay = entry.target.getAttribute('data-delay') || '0';
                (entry.target as HTMLElement).style.animationDelay = `${delay}ms`;
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });

    document.querySelectorAll('[data-animate]').forEach(el => observer.observe(el));
</script>

<style is:global>
    @font-face {
        font-family: "Butler";
        src:
            url("/fonts/butler_bold-webfont.woff2") format("woff2"),
            url("/fonts/butler_bold-webfont.woff") format("woff");
        font-weight: 700;
        font-style: normal;
        font-display: swap;
    }

    @font-face {
        font-family: "Butler";
        src:
            url("/fonts/butler_light-webfont.woff2") format("woff2"),
            url("/fonts/butler_light-webfont.woff") format("woff");
        font-weight: 300;
        font-style: normal;
        font-display: swap;
    }

    html {
        font-size: 18px;
        scroll-behavior: smooth;
    }

    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    @layer base {
        :root {
            --background: 60 10% 98%;
            --foreground: 160 10% 12%;
            --border: 160 5% 82%;

            --primary-50: 155.9 40% 96%;
            --primary-100: 155.9 45% 90%;
            --primary-200: 155.9 50% 78%;
            --primary-300: 155.9 55% 62%;
            --primary-400: 155.9 60% 44%;
            --primary-500: 155.9 62.2% 32.2%;
            --primary-600: 155.9 65% 26%;
            --primary-700: 155.9 65% 20%;
            --primary-800: 155.9 60% 15%;
            --primary-900: 155.9 55% 10%;
            --primary-950: 155.9 50% 5%;

            --secondary-50: 34 74% 95%;
            --secondary-100: 34 74% 90%;
            --secondary-200: 34 74% 85%;
            --secondary-300: 34 74% 80%;
            --secondary-400: 34 74% 75%;
            --secondary-500: 34 74% 70%;
            --secondary-600: 34 74% 60%;
            --secondary-700: 34 74% 50%;
            --secondary-800: 34 74% 40%;
            --secondary-900: 34 74% 30%;
            --secondary-950: 34 74% 20%;

            --info-50: 225.7 100% 95.1%;
            --info-100: 225.7 100% 90.1%;
            --info-200: 225.7 100% 87.1%;
            --info-300: 225.7 100% 83.1%;
            --info-400: 225.7 100% 80.1%;
            --info-500: 225.7 100% 76.1%;
            --info-600: 225.7 100% 65.1%;
            --info-700: 225.7 100% 50.1%;
            --info-800: 225.7 100% 40.1%;
            --info-900: 225.7 100% 30.1%;
            --info-950: 225.7 100% 20.1%;

            --success-50: 160.4 100% 95.5%;
            --success-100: 160.4 100% 90.5%;
            --success-200: 160.4 100% 80.5%;
            --success-300: 160.4 100% 70.5%;
            --success-400: 160.4 100% 60.5%;
            --success-500: 160.4 100% 42.5%;
            --success-600: 160.4 100% 35.5%;
            --success-700: 160.4 100% 30.5%;
            --success-800: 160.4 100% 25.5%;
            --success-900: 160.4 100% 20.5%;
            --success-950: 160.4 100% 15.5%;

            --warning-50: 41.3 100% 95.1%;
            --warning-100: 41.3 100% 90.1%;
            --warning-200: 41.3 100% 80.1%;
            --warning-300: 41.3 100% 70.1%;
            --warning-400: 41.3 100% 60.1%;
            --warning-500: 41.3 100% 54.1%;
            --warning-600: 41.3 100% 45.1%;
            --warning-700: 41.3 100% 35.1%;
            --warning-800: 41.3 100% 25.1%;
            --warning-900: 41.3 100% 15.1%;
            --warning-950: 41.3 100% 5.1%;

            --danger-50: 346.2 100% 95.2%;
            --danger-100: 346.2 100% 90.2%;
            --danger-200: 346.2 100% 85.2%;
            --danger-300: 346.2 100% 80.2%;
            --danger-400: 346.2 100% 75.2%;
            --danger-500: 346.2 100% 69.2%;
            --danger-600: 346.2 100% 55.2%;
            --danger-700: 346.2 100% 40.2%;
            --danger-800: 346.2 100% 30.2%;
            --danger-900: 346.2 100% 20.2%;
            --danger-950: 346.2 100% 10.2%;
        }

        :root.dark {
            --background: 155 20% 7%;
            --foreground: 60 10% 92%;
            --border: 155 10% 20%;

            --primary-50: 155.6 50% 90%;
            --primary-100: 155.6 50% 80%;
            --primary-200: 155.6 55% 68%;
            --primary-300: 155.6 58% 55%;
            --primary-400: 155.6 60% 45%;
            --primary-500: 155.6 62.4% 38.6%;
            --primary-600: 155.6 62.4% 30%;
            --primary-700: 155.6 62.4% 26.3%;
            --primary-800: 155.6 62.4% 20%;
            --primary-900: 155.6 62.4% 15%;
            --primary-950: 155.6 62.4% 10%;
        }
    }

    @layer base {
        :root {
            @apply bg-background text-foreground;
            font-feature-settings:
                "rlig" 1,
                "calt" 1;
        }
    }

    ::selection {
        background-color: hsl(var(--primary-500));
        color: white;
        text-shadow: none;
    }

    @keyframes fadeUp {
        from {
            opacity: 0;
            transform: translateY(24px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    [data-animate] {
        opacity: 0;
    }

    [data-animate].is-visible {
        animation: fadeUp 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }

    [data-animate="fade"].is-visible {
        animation: fadeIn 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }
</style>
